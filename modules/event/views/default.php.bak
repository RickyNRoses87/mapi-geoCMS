<?php

// no direct access to this file
defined( 'DACCESS' ) or die;

?>

<div class="col-md-12">

	<?php

		$GetArray = $_GET; $GetArray['sort'] = 'created'; $SortCreated = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['sort'] = 'modified';	$SortModified = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['sort'] = 'start';	$SortStart = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['sort'] = 'end';	$SortEnd = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['sort'] = 'title';	$SortTitle = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['sort'] = 'address';	$SortAddress = http_build_query($GetArray);

		$GetArray = $_GET; $GetArray['reverse_order'] = 'yes';	$SortReverse = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['reverse_order'] = 'no';	$SortOriginal = http_build_query($GetArray);

		$GetArray = $_GET; $GetArray['filter'] = 'today'; $FilterToday = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['filter'] = 'week'; $FilterWeek = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['filter'] = 'month'; $FilterMonth = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['filter'] = 'quarter'; $FilterQuarter = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['filter'] = 'year'; $FilterYear = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['filter'] = 'all'; $FilterAll = http_build_query($GetArray);

		$GetArray = $_GET; $GetArray['filterby'] = 'modified'; $FilterByMod = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['filterby'] = 'created'; $FilterByCre = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['filterby'] = 'start'; $FilterByStart = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['filterby'] = 'end'; $FilterByEnd = http_build_query($GetArray);
		$GetArray = $_GET; $GetArray['filterby'] = 'period'; $FilterByPer = http_build_query($GetArray);

	?>

	<style>
		.selected {
			color: #ba0000;
		}
		.deselected {
			color: #207d21;
		}
	</style>

	Sort:
	<a href="?<?PHP echo $SortCreated; ?>" class="<?PHP if ($_GET['sort'] == 'created') { echo 'selected'; } else { echo 'deselected'; } ?>">[created]</a>
	<a href="?<?PHP echo $SortModified; ?>" class="<?PHP if ($_GET['sort'] == 'modified') { echo 'selected'; } else { echo 'deselected'; } ?>">[modified]</a>
	<a href="?<?PHP echo $SortStart; ?>" class="<?PHP if ($_GET['sort'] == 'start') { echo 'selected'; } else { echo 'deselected'; } ?>">[start]</a>
	<a href="?<?PHP echo $SortEnd; ?>" class="<?PHP if ($_GET['sort'] == 'end') { echo 'selected'; } else { echo 'deselected'; } ?>">[end]</a>
	<a href="?<?PHP echo $SortTitle; ?>" class="<?PHP if ($_GET['sort'] == 'title') { echo 'selected'; } else { echo 'deselected'; } ?>">[title]</a>
	<a href="?<?PHP echo $SortAddress; ?>" class="<?PHP if ($_GET['sort'] == 'address') { echo 'selected'; } else { echo 'deselected'; } ?>">[address]</a>
	<br>
	Sort direction:
	<?PHP if (isset($_GET['reverse_order'])) { ?>
		<a href="?<?PHP echo $SortReverse; ?>" class="<?PHP if ($_GET['reverse_order'] == 'yes') { echo 'selected'; } else { echo 'deselected'; } ?>">[Reverse]</a>
		<a href="?<?PHP echo $SortOriginal; ?>" class="<?PHP if ($_GET['reverse_order'] == 'no') { echo 'selected'; } else { echo 'deselected'; } ?>">[Original]</a>
	<?PHP } else { ?>
		<a href="?<?PHP echo $SortReverse; ?>" class="deselected">[Reverse]</a>
	<?PHP } ?>
	<br>

	Active Filter:
	<a href="?<?PHP echo $FilterToday; ?>" class="<?PHP if ($_GET['filter'] == 'today') { echo 'selected'; } else { echo 'deselected'; } ?>">[today]</a>
	<a href="?<?PHP echo $FilterWeek; ?>" class="<?PHP if ($_GET['filter'] == 'week') { echo 'selected'; } else { echo 'deselected'; } ?>">[this week]</a>
	<a href="?<?PHP echo $FilterMonth; ?>" class="<?PHP if ($_GET['filter'] == 'month') { echo 'selected'; } else { echo 'deselected'; } ?>">[this month]</a>
	<a href="?<?PHP echo $FilterQuarter; ?>" class="<?PHP if ($_GET['filter'] == 'quarter') { echo 'selected'; } else { echo 'deselected'; } ?>">[this quarter]</a>
	<a href="?<?PHP echo $FilterYear; ?>" class="<?PHP if ($_GET['filter'] == 'year') { echo 'selected'; } else { echo 'deselected'; } ?>">[this year]</a>
	<a href="?<?PHP echo $FilterAll; ?>" class="<?PHP if ($_GET['filter'] == 'all') { echo 'selected'; } else { echo 'deselected'; } ?>">[all]</a>
	<br>

	Fix Filter: [start date] [end date]<br>

	Filter by:
	<a href="?<?PHP echo $FilterByCre; ?>" class="<?PHP if ($_GET['filterby'] == 'created') { echo 'selected'; } else { echo 'deselected'; } ?>">[created]</a>
	<a href="?<?PHP echo $FilterByMod; ?>" class="<?PHP if ($_GET['filterby'] == 'modified') { echo 'selected'; } else { echo 'deselected'; } ?>">[modified]</a>
	<a href="?<?PHP echo $FilterByStart; ?>" class="<?PHP if ($_GET['filterby'] == 'start') { echo 'selected'; } else { echo 'deselected'; } ?>">[start]</a>
	<a href="?<?PHP echo $FilterByEnd; ?>" class="<?PHP if ($_GET['filterby'] == 'end') { echo 'selected'; } else { echo 'deselected'; } ?>">[end]</a>
	<a href="?<?PHP echo $FilterByPer; ?>" class="<?PHP if ($_GET['filterby'] == 'period') { echo 'selected'; } else { echo 'deselected'; } ?>">[period]</a>



</div>

<div class="col-md-12">
		<div class="row main-title">
				<div class="col-xs-12">
						<h1 class="content-title"><span itemprop="name">Mi legyen az oldal c√≠me?</span></h1>
				</div>
		</div>

        <?php 
        		
        		if ( sizeof( $data ) > 0 ) {
        				foreach ( $data[0] as $content ) {
        						$text_wrap = wordwrap( strip_tags( $content['text'] ), 800, "%|%" );
        						$text_array = explode( '%|%', $text_wrap );
								
        						?>

										<div class="row main-header">
												<div class="row content-title">
														<div class="col-md-12">
																<h3><?php echo $content['title']; ?></h3>

																<h5>
																	Created: <?php echo $content['created']; ?>
																	Modified: <?php echo $content['modified']; ?>
																	<?php echo $content['address']; ?> :
																	<?php echo $content['start']; ?> -
																	<?php echo $content['end']; ?></h5>
														</div>
												</div>
												<div class="row content-text">
														<div class="col-md-12">
																<p><?php echo $text_array[0]; ?> ... </p>
														</div>
												</div>
												<div class="row content-text">
														<div class="col-md-12">
																<a href="index.php?module=content&object=<?php echo intval( $content['id'] ); ?>"><?php __('Leggi tutto'); ?>&nbsp;&gt;</a>
														</div>
												</div>
										</div>
        						<?php
        				}
        		} else {
				?>
				<div class="row main-header">
						<div class="row content-title">
								<div class="col-md-12">
										<h3><?php __('Contenuto in lingua non trovato'); ?></h3>
								</div>
						</div>
				</div>
				<?php
			}
        ?>

</div>